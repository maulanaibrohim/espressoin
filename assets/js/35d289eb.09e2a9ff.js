"use strict";(self.webpackChunkespressoin=self.webpackChunkespressoin||[]).push([[9874],{3905:(n,e,a)=>{a.d(e,{Zo:()=>k,kt:()=>c});var t=a(7294);function i(n,e,a){return e in n?Object.defineProperty(n,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[e]=a,n}function r(n,e){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.push.apply(a,t)}return a}function u(n){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?r(Object(a),!0).forEach((function(e){i(n,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(a,e))}))}return n}function l(n,e){if(null==n)return{};var a,t,i=function(n,e){if(null==n)return{};var a,t,i={},r=Object.keys(n);for(t=0;t<r.length;t++)a=r[t],e.indexOf(a)>=0||(i[a]=n[a]);return i}(n,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);for(t=0;t<r.length;t++)a=r[t],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(n,a)&&(i[a]=n[a])}return i}var o=t.createContext({}),s=function(n){var e=t.useContext(o),a=e;return n&&(a="function"==typeof n?n(e):u(u({},e),n)),a},k=function(n){var e=s(n.components);return t.createElement(o.Provider,{value:e},n.children)},p="mdxType",d={inlineCode:"code",wrapper:function(n){var e=n.children;return t.createElement(t.Fragment,{},e)}},g=t.forwardRef((function(n,e){var a=n.components,i=n.mdxType,r=n.originalType,o=n.parentName,k=l(n,["components","mdxType","originalType","parentName"]),p=s(a),g=i,c=p["".concat(o,".").concat(g)]||p[g]||d[g]||r;return a?t.createElement(c,u(u({ref:e},k),{},{components:a})):t.createElement(c,u({ref:e},k))}));function c(n,e){var a=arguments,i=e&&e.mdxType;if("string"==typeof n||i){var r=a.length,u=new Array(r);u[0]=g;var l={};for(var o in e)hasOwnProperty.call(e,o)&&(l[o]=e[o]);l.originalType=n,l[p]="string"==typeof n?n:i,u[1]=l;for(var s=2;s<r;s++)u[s]=a[s];return t.createElement.apply(null,u)}return t.createElement.apply(null,a)}g.displayName="MDXCreateElement"},4766:(n,e,a)=>{a.r(e),a.d(e,{assets:()=>o,contentTitle:()=>u,default:()=>d,frontMatter:()=>r,metadata:()=>l,toc:()=>s});var t=a(7462),i=(a(7294),a(3905));const r={sidebar_position:2,title:"Uji Konvergensi"},u="Uji Konvergensi untuk ecutwfc dan kpoints dalam Quantum ESPRESSO",l={unversionedId:"kalkulasi/konvergensi",id:"kalkulasi/konvergensi",title:"Uji Konvergensi",description:"Apa itu Uji Konvergensi?",source:"@site/docs/kalkulasi/konvergensi.md",sourceDirName:"kalkulasi",slug:"/kalkulasi/konvergensi",permalink:"/espressoin/kalkulasi/konvergensi",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2,title:"Uji Konvergensi"},sidebar:"tutorialSidebar",previous:{title:"Self-Consistent Field",permalink:"/espressoin/kalkulasi/scf"},next:{title:"Relaksasi Struktur",permalink:"/espressoin/kalkulasi/relax"}},o={},s=[{value:"Apa itu Uji Konvergensi?",id:"apa-itu-uji-konvergensi",level:2},{value:"Uji Konvergensi untuk ecutwfc",id:"uji-konvergensi-untuk-ecutwfc",level:2},{value:"Uji Konvergensi untuk kpoints",id:"uji-konvergensi-untuk-kpoints",level:2},{value:"Menggunakan PWTK untuk Uji Konvergensi",id:"menggunakan-pwtk-untuk-uji-konvergensi",level:2},{value:"Instalasi PWTK",id:"instalasi-pwtk",level:3},{value:"Uji Konvergensi ecutwfc dengan PWTK",id:"uji-konvergensi-ecutwfc-dengan-pwtk",level:3},{value:"Uji Konvergensi kpoints dengan PWTK",id:"uji-konvergensi-kpoints-dengan-pwtk",level:3},{value:"Plot Hasil Uji Konvergensi ecutwfc dan kpoints",id:"plot-hasil-uji-konvergensi-ecutwfc-dan-kpoints",level:3}],k={toc:s},p="wrapper";function d(n){let{components:e,...a}=n;return(0,i.kt)(p,(0,t.Z)({},k,a,{components:e,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"uji-konvergensi-untuk-ecutwfc-dan-kpoints-dalam-quantum-espresso"},"Uji Konvergensi untuk ecutwfc dan kpoints dalam Quantum ESPRESSO"),(0,i.kt)("h2",{id:"apa-itu-uji-konvergensi"},"Apa itu Uji Konvergensi?"),(0,i.kt)("p",null,"Uji konvergensi merupakan langkah penting dalam perhitungan struktur elektronik, seperti yang dilakukan dengan Quantum ESPRESSO, untuk memastikan akurasi dan keandalan hasil. Ini melibatkan variasi sistematis pada parameter-parameter kunci dalam perhitungan hingga mencapai tingkat konvergensi yang diinginkan. Dalam Quantum ESPRESSO, dua parameter penting yang memerlukan uji konvergensi adalah ecutwfc (energi cutoff gelombang datar) dan kpoints (jumlah dan distribusi k-point dalam zona Brillouin)."),(0,i.kt)("h2",{id:"uji-konvergensi-untuk-ecutwfc"},"Uji Konvergensi untuk ecutwfc"),(0,i.kt)("p",null,"ecutwfc adalah parameter yang menentukan cutoff energi untuk fungsi gelombang dalam basis set gelombang datar. Untuk melakukan uji konvergensi untuk ecutwfc, biasanya Anda akan memulai dengan nilai rendah dan secara bertahap meningkatkannya hingga energi total dan properti lain yang diminati stabil dalam toleransi yang diinginkan."),(0,i.kt)("h2",{id:"uji-konvergensi-untuk-kpoints"},"Uji Konvergensi untuk kpoints"),(0,i.kt)("p",null,"kpoints merujuk pada diskritisasi zona Brillouin dalam ruang reciprokal. Penting untuk menentukan jumlah dan distribusi k-point yang sesuai untuk mendapatkan representasi struktur elektronik yang akurat. Uji konvergensi untuk kpoints melibatkan pengujian grid dan spacing yang berbeda untuk memastikan bahwa hasil menjadi independen dari sampling k-point."),(0,i.kt)("h2",{id:"menggunakan-pwtk-untuk-uji-konvergensi"},"Menggunakan PWTK untuk Uji Konvergensi"),(0,i.kt)("p",null,"PWTK (Plane-Wave ToolKit) adalah utilitas yang dapat mengotomasi uji konvergensi menggunakan Quantum Espresso. Untuk menggunakan PWTK dalam uji konvergensi ecutwfc dan kpoints, ikuti langkah-langkah di bawah ini:"),(0,i.kt)("h3",{id:"instalasi-pwtk"},"Instalasi PWTK"),(0,i.kt)("p",null,"Sebelum menggunakan PWTK, Anda harus menginstalnya terlebih dahulu. Untuk melakukan ini, ikuti langkah-langkah di bawah ini:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Pastikan menginstal dependensi yang diperlukan, yaitu tcl dan tcllib. Untuk Ubuntu, Anda dapat menginstalnya dengan perintah berikut:"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"sudo apt install tcl tcllib\n"))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Unduh PWTK dari ",(0,i.kt)("a",{parentName:"p",href:"http://pwtk.ijs.si/download/pwtk-2.0.tar.gz"},"sini")," atau dapat juga menggunakan wget melalui terminal:"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"wget http://pwtk.ijs.si/download/pwtk-2.0.tar.gz\n"))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Ekstrak file yang diunduh:"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"tar -zxvf pwtk-2.0.tar.gz\n"))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Tambahkan path ke direktori PWTK ke dalam PATH Anda. Untuk Ubuntu, Anda dapat menambahkan baris berikut ke dalam file .bashrc Anda:"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'echo "export PATH=$PATH:/path/to/pwtk-2.0" >> ~/.bashrc\nsource ~/.bashrc\n')))),(0,i.kt)("h3",{id:"uji-konvergensi-ecutwfc-dengan-pwtk"},"Uji Konvergensi ecutwfc dengan PWTK"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Buat direktori untuk uji konvergensi ecutwfc:"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"mkdir konvergensi_ecutwfc\ncd konvergensi_ecutwfc\n"))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Buat file input Quantum Espresso untuk uji konvergensi ecutwfc (simpan dengan nama scf.in).")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Buat file input PWTK untuk uji konvergensi ecutwfc. Contoh file input PWTK untuk uji konvergensi ecutwfc dapat dilihat di bawah ini (simpan dengan nama konvergensi_ecutwfc.pwtk):"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'    # convergence_ecut.pwtk\n\n    # Tentukan rentang nilai cutoff energy\n    set ecut_range {25 35 45 55 65 75 85 95 105 115}\n\n    # Buka file data untuk menyimpan nilai cutoff energy dan total energy\n    set data_file "konvergensi_ecutwfc.dat"\n    set data_output [open $data_file w]\n    puts $data_output "# Cutoff Energy (eV)    Total Energy (eV)"\n\n    # Lakukan perulangan untuk setiap nilai cutoff energy\n    foreach ecut $ecut_range {\n    # Baca isi file input yang sudah ada\n    set input_file "scf.in"\n    set input_data [open $input_file r]\n    set input_contents [read $input_data]\n    close $input_data\n\n    # Ubah nilai ecutwfc menggunakan ekspresi reguler\n    set modified_input_data [regsub -all {ecutwfc\\s*=\\s*\\d+\\.\\d+} $input_contents "ecutwfc = $ecut"]\n\n    # Tulis input yang sudah diubah ke file baru untuk setiap iterasi\n    set modified_input_file "scf_ecut_$ecut.in"\n    set modified_output_data [open $modified_input_file w]\n    puts -nonewline $modified_output_data $modified_input_data\n    close $modified_output_data\n\n    # Jalankan perhitungan Quantum ESPRESSO\n    exec pw.x < $modified_input_file > scf_ecut_$ecut.out\n\n    # Ekstrak total energy dari file output\n    set total_energy [exec awk {/^!    total energy/ {print $5}} scf_ecut_$ecut.out]\n\n    # Tambahkan nilai cutoff energy dan total energy ke dalam file data\n    puts $data_output "$ecut\\t$total_energy"\n    }\n\n    # Tutup file data\n    close $data_output\n\n    # Akhir dari script\n'))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Jalankan PWTK untuk uji konvergensi ecutwfc:"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"pwtk konvergensi_ecutwfc.pwtk\n")))),(0,i.kt)("p",null,"Hasil uji konvergensi ecutwfc akan disimpan dalam file konvergensi_ecutwfc.dat."),(0,i.kt)("h3",{id:"uji-konvergensi-kpoints-dengan-pwtk"},"Uji Konvergensi kpoints dengan PWTK"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Buat direktori untuk uji konvergensi kpoints:"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"mkdir konvergensi_kpoints\ncd konvergensi_kpoints\n"))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Buat file input Quantum Espresso untuk uji konvergensi kpoints (simpan dengan nama scf.in.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Buat file input PWTK untuk uji konvergensi kpoints. Contoh file input PWTK untuk uji konvergensi kpoints dapat dilihat di bawah ini (simpan dengan nama konvergensi_kpoints.pwtk):"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'# konvergensi_kpoint.pwtk\n\n# Tentukan daftar grid k-point yang akan diuji\nset kpoint_grids {1 2 3 4 5}\n\n# Buka file data untuk menyimpan grid k-point dan total energy\nset data_file "konvergensi_kpoint.dat"\nset data_output [open $data_file w]\nputs $data_output "# Grid K-Point    Total Energy (eV)"\n\n# Lakukan perulangan untuk setiap grid k-point\nforeach k $kpoint_grids {\n    # Baca isi file input yang sudah ada\n    set input_file "scf.in"\n    load_fromPWI $input_file\n\n    # Ubah nilai k_points\n    K_POINTS automatic "$k $k $k 1 1 1"\n\n    # Jalankan perhitungan Quantum ESPRESSO\n    set name "scf_kpoints_$k"\n    runPW $name.in\n\n    # Ekstrak total energy dari file output\n    set Etot [::pwtk::pwo::totene "$name.out"]\n\n    # Tambahkan grid k-point dan total energy ke dalam file data\n    puts $data_output "$k\\t$Etot"\n}\n\n# Tutup file data\nclose $data_output\n\n# Akhir dari script\n\n'))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Jalankan PWTK untuk uji konvergensi kpoints:"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"pwtk konvergensi_kpoints.pwtk\n")))),(0,i.kt)("p",null,"Hasil uji konvergensi kpoints akan disimpan dalam file konvergensi_kpoints.dat."),(0,i.kt)("h3",{id:"plot-hasil-uji-konvergensi-ecutwfc-dan-kpoints"},"Plot Hasil Uji Konvergensi ecutwfc dan kpoints"),(0,i.kt)("p",null,"Untuk plot hasil uji konvergensi ecutwfc dan kpoints, kalian dapat menggunakan python. Berikut ini adalah contoh script python untuk plot hasil uji konvergensi ecutwfc dan kpoints:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'import matplotlib.pyplot as plt\n\ndef plot_convergence(data_file, x_label, y_label):\n    # Baca data dari file\n    x_values = []\n    y_values = []\n\n    with open(data_file, \'r\') as file:\n        next(file)  # Lewati baris header\n        for line in file:\n            x, y = line.strip().split()\n            x_values.append(float(x))\n            y_values.append(float(y))\n\n    # Buat plot\n    plt.plot(x_values, y_values, marker=\'o\', linestyle=\'-\')\n    plt.xlabel(x_label)\n    plt.ylabel(y_label)\n    plt.title(f\'Convergence of {y_label} with {x_label}\')\n    plt.grid(True)\n    plt.show()\n\n# Plot konvergensi cutoff energi\ndata_konvergensi_ecutwfc = "konvergensi_ecutwfc.dat"\nplot_convergence(data_konvergensi_ecutwfc, "Cutoff Energy (eV)", "Total Energy (eV)")\n\n# Plot Konvergensi kpoints\ndata_konvergensi_kpoints = "konvergensi_kpoints.dat"\nplot_convergence(data_konvergensi_kpoints, "K-Points", "Total Energy (eV)")\n\n')))}d.isMDXComponent=!0}}]);